@using ApexCharts
@using Microsoft.FluentUI.AspNetCore.Components

<ApexChart @ref=chart TItem="CategoryChart" Title="@(ShowCaption ? "Expenses" : null)" Options="options"
           Height="Height" OnDataPointSelection=DataPointsSelected>
    <ApexPointSeries TItem="CategoryChart" Items="expense" Name="Value"
                     SeriesType="SeriesType.Pie"
                     XValue="@(e => e.Category.Name)"
                     YAggregate="@(e => e.Sum(e => e.Amount))"
                     OrderByDescending="e => e.Y"/>
</ApexChart>

@if (isLoading)
{
    <FluentProgressRing/>
}